<html>
<head>
    <script src='https://code.jquery.com/jquery-1.11.3.min.js'></script>
    <script src='dist/partials/purecloud.js'></script>
    <script src='dist/partials/usersapi.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.2.0/mustache.min.js'></script>

    <script>
        var redirectUrl = "http://localhost:8085/authredirect.html";

        if(window.location.hostname === 'mypurecloud.github.io'){
            redirectUrl = "http://mypurecloud.github.io/purecloud_javascript_client/examples/authredirect.html";
        }
        var pureCloudSession = new PureCloudSession();
        var usersapi = new UsersApi(pureCloudSession);

        pureCloudSession.authorize('efb6698a-5f76-4f90-bf29-9a69a3555602', redirectUrl, "user_me").done(function(){
            usersapi.getMe().done(function(data){
                var template = $('#personTpl').html();
                var html = Mustache.to_html(template, data);
                $('#sampleArea').html(html);
            }).error(function(){
                alert("error");
            });
        })

    </script>
</head>

<body>
    <script id="personTpl" type="text/template">
    <h1>{{displayName}} {{email}}</h1>
    <label>Phone Number:</label> {{phoneNumber}}<br/>
    <label>Title:</label> {{phoneNumber}}<br/>

    <label>Permissions:</label><br/>
    {{#permissions}}
    {{.}}<br/>
    {{/permissions}}
    </script>
    <div id='sampleArea'>
    </div>
</body>
